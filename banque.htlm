<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Econya – Connexion bancaire (démo)</title>
  <meta name="description" content="Analyse simple des revenus et dépenses. Démo de connexion bancaire Econya." />
  <link rel="icon" type="image/svg+xml" href="favicon.svg" />
  <link rel="stylesheet" href="style.css" />

  <!-- Sécurité simple -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self';
    style-src 'self' 'unsafe-inline';
    img-src 'self' data:;
    connect-src 'self' https://econya-backend.onrender.com;
    object-src 'none'; base-uri 'self'; frame-ancestors 'self';
  ">
</head>
<body class="bank">
  <header class="topbar">
    <a class="brand" href="/">
      <img src="logo.svg" alt="Econya" height="28" />
      <span>Econya</span>
    </a>
    <nav class="nav">
      <a href="comparateur.html">Comparateur Pro</a>
      <a href="coach-eco.html">Coach Éco</a>
      <a class="active" href="banque.html">Banque (démo)</a>
      <a href="playbooks.html">Playbooks</a>
    </nav>
  </header>

  <main class="container">
    <h1>Connexion bancaire (démo)</h1>

    <!-- Badges d’état -->
    <div class="badges">
      <span id="api-status" class="badge ghost">API…</span>
      <span id="ob-status"  class="badge ghost">Open Banking…</span>
      <span id="plan-badge" class="badge premium ghost" title="Plan actuel">Gratuit</span>
    </div>

    <!-- Bloc comptes -->
    <section class="card" style="margin-top:16px">
      <h2>Mes comptes</h2>
      <div id="accounts" class="accounts"></div>
    </section>

    <!-- Filtres + actions -->
    <section class="card" style="margin-top:16px">
      <div class="row" style="align-items:center; gap:12px; flex-wrap:wrap">
        <h2 style="margin:0">Transactions</h2>
        <label style="display:flex; align-items:center; gap:8px">
          Mois :
          <input id="tx-month" type="month" />
        </label>
        <button id="tx-load" class="btn">Charger</button>
        <button id="tx-export" class="btn ghost">Exporter CSV</button>
        <a href="comparateur.html" class="btn ghost">Comparer maintenant</a>
      </div>
      <div class="kpis" id="kpis" style="margin-top:12px"></div>
      <div class="row" style="gap:16px; align-items:flex-start; margin-top:12px; flex-wrap:wrap">
        <div class="table-wrap">
          <table class="table" id="tx-table">
            <thead>
              <tr>
                <th>Date</th><th>Libellé</th><th>Catégorie</th>
                <th style="text-align:right; min-width:120px">Montant</th>
              </tr>
            </thead>
            <tbody id="tx-tbody"></tbody>
            <tfoot>
              <tr>
                <td colspan="3" style="text-align:right"><strong>Total</strong></td>
                <td id="tx-total" style="text-align:right">0,00 €</td>
              </tr>
            </tfoot>
          </table>
        </div>

        <!-- Répartition par catégorie -->
        <div class="card" style="min-width:280px; flex:1">
          <h3>Répartition par catégorie</h3>
          <ul id="cat-split" class="cat-split"></ul>
          <div id="premium-hint" class="hint">
            Répartition détaillée & graphiques — <a href="#" id="open-premium">Passez en Premium</a>
          </div>
        </div>
      </div>
    </section>

    <section class="card" style="margin-top:16px">
      <h2>Connexion Open Banking</h2>
      <p>Démo : démarrez un parcours de connexion (mock).</p>
      <button id="ob-start" class="btn">Relier ma banque</button>
    </section>
  </main>

  <footer class="footer">
    <span id="year"></span> © Econya
  </footer>

  <!-- Variables d’environnement (URL backend) -->
  <script src="assets/env.js"></script>
  <!-- Logiques front de la page banque -->
  <script src="assets/bank.js"></script>
</body>
</html>


